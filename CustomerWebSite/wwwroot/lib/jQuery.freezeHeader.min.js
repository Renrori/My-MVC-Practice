(function(n){var t=0;n.fn.freezeHeader=function(i){function u(u){var s=u.attr("id")||"tbl-"+ ++t,o;if(u.length>0&&u[0].tagName.toLowerCase()=="table"){o={id:s,grid:u,container:null,header:null,divScroll:null,openDivScroll:null,closeDivScroll:null,scroller:null};i&&i.height!==undefined&&(o.divScroll='<div id="hdScroll'+o.id+'" style="height: '+i.height+'; overflow-y: scroll">',o.closeDivScroll="<\/div>");o.header=o.grid.find("thead");i&&i.height!==undefined&&n("#hdScroll"+o.id).length==0&&o.grid.wrapAll(o.divScroll);o.scroller=i&&i.height!==undefined?n("#hdScroll"+o.id):n(window);i&&i.scrollListenerEl!==undefined&&(o.scroller=i.scrollListenerEl);o.scroller.on("scroll",function(){n("#hd"+o.id).length==0&&o.grid.before('<div id="hd'+o.id+'"><\/div>');o.container=n("#hd"+o.id);o.header.offset()!=null&&(f(o,i)?(u.trigger("freeze:on"),r||(e(o),r=!0)):(n(document).scrollTop()>o.header.offset().top?(o.container.css("position","absolute"),o.container.css("top",o.grid.find("tr:last").offset().top-o.header.height()+"px")):(u.trigger("freeze:off"),o.container.css("visibility","hidden"),o.container.css("top","0px"),o.container.width(0)),r=!1))})}}function f(t,i){var r,u;return i&&(i.height!==undefined||i.scrollListenerEl!==undefined)?t.header.offset().top<=t.scroller.offset().top:(r=t.header.offset().top,i&&i.offset!==undefined&&(r-=parseInt(i.offset.replace("px",""),10)),u=t.grid.height()-t.header.height()-t.grid.find("tr:last").height()+t.header.offset().top,n(document).scrollTop()>r&&n(document).scrollTop()<u)}function e(t){var r,u,f;t.container.html("");t.container.val("");r=n('<table style="margin: 0 0;"><\/table>');u=t.grid.prop("attributes");n.each(u,function(){this.name!="id"&&r.attr(this.name,this.value)});f=t.header.clone(!0);f.appendTo(r);t.container.append(r);t.container.width(t.header.width());t.container.height(t.header.height);t.container.find("th").each(function(i){var r=t.grid.find("th").eq(i).width();n(this).css("width",r)});t.container.css("visibility","visible");i&&i.height!==undefined?(i.offset!==undefined?t.container.css("top",t.scroller.offset().top+i.offset.replace("px","")*1+"px"):t.container.css("top",t.scroller.offset().top+"px"),t.container.css("position","absolute")):i&&i.scrollListenerEl!==undefined?(t.container.css("top",t.scroller.find("thead > tr").innerHeight()+"px"),t.container.css("position","absolute"),t.container.css("z-index","2")):i&&i.offset!==undefined?(t.container.css("top",i.offset),t.container.css("position","fixed")):(t.container.css("top","0px"),t.container.css("position","fixed"))}var r=!1;return this.each(function(t,i){u(n(i))})}})(jQuery);